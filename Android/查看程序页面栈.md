``` sh
#!/bin/sh

# 本脚本请在开发机 Shell 中运行
# 请先替换 <package_name|process_name>

function printCurrent {
  # Android 11+
  adb shell dumpsys window | grep "mFocusedApp"
  adb shell dumpsys window windows | grep mObscuringWindow

  # Android 10-
  # adb shell dumpsys window windows | grep "mFocusedApp"
  # adb shell dumpsys window windows | grep "mCurrentFocus"
}

function printStack {
  adb shell dumpsys activity <package_name|process_name> \
    | grep \
    -e "pid=" \
    -e "Local Activity" \
    -e "Local FragmentActivity" \
    -e " FragmentManager{" \
    -e "Active Fragments" \
    -e "Added Fragments" \
    -e "  #"
}

function printAll {
  echo
  printCurrent
  echo
  printStack
  echo
}

function reset {
  printf "\33c\e[3J"
  printAll
}

reset

while read -n1 -r -p "按 q 退出, 按 c 重置, 按 其他任意键 追加> " && [[ $REPLY != q ]] ; do
  case $REPLY in
    c) reset;;
    *) printAll;;
  esac
done
```
